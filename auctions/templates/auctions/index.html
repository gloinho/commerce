{% extends "auctions/layout.html" %}
{% load auction_extras %}


{% block body %}
    {%block title%}
    <h2>Active Listings</h2>
    {%endblock%}
    {% for listing in listings%}
        {%if listing.is_active %}
            <div class="card" style="width: 400px; margin: 20px;">
                <div class="img-thumbnail listings">              
                    <div class="image" style="text-align:center">
                        <picture>
                            <a href="{% url 'listing' listing.id %}">{%load static%}<img class="card-img-top img-fluid img-thumbnail" src="{%static listing|get_image %}"></a>
                        </picture> 
                    </div>
                    <div class="card-body">
                        <a href="{% url 'listing' listing.id %}"><div class="card-title" id="listing">{{listing.product}}</div></a>
                        {%if listing.is_active %}
                        <div class="card-text"><span class="badge badge-success">Status: Active</span></div>
                        <div class="card-text" id="price">Current Price: ${{listing|get_bid}}</div>
                        {%else%}
                        <div class="card-text"><span class="badge badge-danger">Status: Closed</span></div>
                        <div class="card-text" id="price">Final Price: ${{listing|get_bid}}</div>
                        {%endif%}
                        <h6 class="card-text mb-2 text-muted" id="date">Created {{listing.register_date}}</h6>
                        <div class='card-text'id="description">{{listing.description}}</div>

                    </div>  
                </div>
            </div>
        {%endif%}
    {% endfor %}
{% endblock %}